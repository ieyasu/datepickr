function DPDate(year,month,day){this.date=void 0!==day?new Date(year,month,day):void 0!==month?new Date(year,month):void 0!==year?new Date(year):new Date}DPDate.weekdays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],DPDate.weekdayAbbrevs=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],DPDate.months=["January","February","March","April","May","June","July","August","September","October","November","December"],DPDate.monthAbbrevs=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],DPDate.daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31],DPDate.firstDayOfWeek=0,DPDate.lastDayOfWeek=function(){return(DPDate.firstDayOfWeek+6)%7},DPDate.weekdaysInCalendarOrder=function(){if(DPDate.firstDayOfWeek<0||DPDate.firstDayOfWeek>7)throw"DPDate.firstDayOfWeek is outside range 0-6 ("+DPDate.firstDayOfWeek+")";var days=DPDate.weekdayAbbrevs;return DPDate.firstDayOfWeek>0&&(days=days.slice(DPDate.firstDayOfWeek).concat(days.slice(0,DPDate.firstDayOfWeek))),days},DPDate.prototype={clone:function(){return new DPDate(this.date.getTime())},getYear:function(){return this.date.getFullYear()},getMonth:function(){return this.date.getMonth()},getDay:function(){return this.date.getDate()},getDayOfWeek:function(){return this.date.getDay()},setYear:function(year){return this.date.setFullYear(year),this},setMonth:function(month){return this.date.setMonth(month),this},setDay:function(dayOfMonth){return this.date.setDate(dayOfMonth),this},compare:function(other){return other&&other.date&&other.date.getTime?this.date.getTime()-other.date.getTime():null},isSameDay:function(otherDate){return 0===this.compare(otherDate)},isLeapYear:function(){var year=this.getYear();return year%4===0&&year%100!==0||year%400===0},daysThisMonth:function(){return 1===this.getMonth()&&this.isLeapYear()?29:DPDate.daysInMonth[this.getMonth()]},nextDay:function(){return this.date.setDate(this.getDay()+1),this},nextMonth:function(){return this.date.setMonth(this.getMonth()+1),this},prevMonth:function(){return this.date.setMonth(this.getMonth()-1),this},firstOfYear:function(){return new DPDate(this.getYear(),0,1)},lastOfYear:function(){return new DPDate(this.getYear(),11,31)},firstOfMonth:function(){return new DPDate(this.date.getTime()).setDay(1)},lastOfMonth:function(){return new DPDate(this.getYear(),this.getMonth(),this.daysThisMonth())},firstCalendarDay:function(){var first=this.firstOfMonth(),day=(first.getDayOfWeek()+DPDate.firstDayOfWeek)%(DPDate.firstDayOfWeek+7);return day>DPDate.firstDayOfWeek&&first.setDay(first.getDay()-(day-DPDate.firstDayOfWeek)),first},lastCalendarDay:function(){var last=this.lastOfMonth(),lastDayOfWeek=DPDate.firstDayOfWeek+6,day=(last.getDayOfWeek()+DPDate.firstDayOfWeek)%(DPDate.firstDayOfWeek+7);return lastDayOfWeek>day&&last.setDay(last.getDay()+(lastDayOfWeek-day)),last},strftime:function(fmt){function formatByChar(c){switch(c){case"A":return DPDate.weekdays[self.getDayOfWeek()];case"a":return DPDate.weekdayAbbrevs[self.getDayOfWeek()];case"B":return DPDate.months[self.getMonth()];case"b":return DPDate.monthAbbrevs[self.getMonth()];case"d":var day=self.getDay();return 10>day?"0"+day:day;case"e":var day=self.getDay();return 10>day?" "+day:day;case"m":var month=self.getMonth()+1;return 10>month?"0"+month:month;case"s":return Math.round(self.date.getTime()/1e3);case"u":var day=self.getDayOfWeek();return 0==day?7:day;case"w":return self.getDayOfWeek();case"Y":return self.getYear();case"y":return self.date.getFullYear().toString().substr(2);case"z":var off=-self.date.getTimezoneOffset(),min=Math.abs(off)%60,hour=Math.floor(off/60);return 10>min&&(min="0"+min),Math.abs(hour)<10&&(hour="0"+hour),hour>-1&&(hour="+"+hour),hour+min;case"%":return"%";default:return void 0}}for(var self=this,s="",i=0;i<fmt.length;i++)"%"===fmt[i]&&i<fmt.length-1?(s+=formatByChar(fmt[i+1])||fmt.substr(i,2),i++):s+=fmt[i];return s}};var datepickr=function(selector,config){"use strict";var elements,createInstance,i,instances=[];if(datepickr.prototype=datepickr.init.prototype,createInstance=function(element){return element._datepickr&&element._datepickr.destroy(),element._datepickr=new datepickr.init(element,config),element._datepickr},selector.nodeName)return createInstance(selector);if(elements=document.querySelectorAll(selector),1===elements.length)return createInstance(elements[0]);for(i=0;i<elements.length;i++)instances.push(createInstance(elements[i]));return instances};datepickr.init=function(element,instanceConfig){"use strict";var initConfig,navigationCurrentMonth,navigationCurrentYear,wrapperElement,showingDate,selectedDate,wrap,buildDaysOfWeek,buildDaysInMonth,updateMonthMenu,updateYearMenu,updateNavigationCurrentDate,buildNavigation,rebuildCalendar,monthChanged,yearChanged,documentClick,calendarClick,buildCalendar,getOpenEvent,bind,open,close,destroy,init,self=this,defaultConfig={dateFormat:"%B %e, %Y",altFormat:null,altInput:null,minDate:null,maxDate:null,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",abbreviateMonth:!1},calendarContainer=document.createElement("div"),calendar=document.createElement("table"),calendarBody=document.createElement("tbody");return initConfig=function(){var config;instanceConfig=instanceConfig||{},self.config={};for(config in defaultConfig)self.config[config]=instanceConfig[config]||defaultConfig[config];self.config.minDate&&self.config.minDate.getTime&&(self.config.minDate=new DPDate(self.config.minDate.getTime())),self.config.maxDate&&self.config.maxDate.getTime&&(self.config.maxDate=new DPDate(self.config.maxDate.getTime())),self.config.altInput&&!self.config.altFormat&&(self.config.altFormat=self.config.dateFormat),self.config.monthNames=self.config.abbreviateMonth?DPDate.monthAbbrevs:DPDate.months},initConfig(),calendarContainer.className="datepickr-calendar",function(){var tagName;tagName=self.config.changeMonth?"select":"span",navigationCurrentMonth=document.createElement(tagName),navigationCurrentMonth.className="datepickr-current-month",tagName=self.config.changeYear?"select":"span",navigationCurrentYear=document.createElement(tagName),navigationCurrentYear.className="datepickr-current-year"}(),wrap=function(){wrapperElement=document.createElement("div"),wrapperElement.className="datepickr-wrapper",self.element.parentNode.insertBefore(wrapperElement,self.element),wrapperElement.appendChild(self.element)},buildDaysOfWeek=function(){var weekdayContainer=document.createElement("thead"),dayNames=DPDate.weekdaysInCalendarOrder();weekdayContainer.innerHTML="<tr><th>"+dayNames.join("</th><th>")+"</th></tr>",calendar.appendChild(weekdayContainer)},buildDaysInMonth=function(){function tdClasses(){var classes="";return calDay.isSameDay(today)&&(classes+="today"),calDay.isSameDay(selectedDate)&&(classes+=" selected"),(calDay.compare(firstEnabled)<0||calDay.compare(lastEnabled)>0)&&(classes+=" disabled"),classes.length>0&&(classes=' class="'+classes+'"'),classes}for(var sd=showingDate,calDay=sd.firstCalendarDay(),calLast=sd.lastCalendarDay(),today=new DPDate,mFirst=sd.firstOfMonth(),firstEnabled=mFirst.compare(self.config.minDate)<0?self.config.minDate:mFirst,mLast=sd.lastOfMonth(),lastEnabled=mLast.compare(self.config.maxDate)<0?mLast:self.config.maxDate,html="<tbody><tr>";html+="<td"+tdClasses()+'><span class="datepickr-day">',html+=calDay.getDay()+"</span></td>",!calDay.isSameDay(calLast);calDay.nextDay())calDay.getDayOfWeek()==DPDate.lastDayOfWeek()&&(html+="</tr><tr>");html+="</tr></tbody>",calendarBody.innerHTML=html},updateMonthMenu=function(){for(var startDate=showingDate.firstOfYear(),month=startDate.compare(self.config.minDate)<0?self.config.minDate.getMonth():0,endDate=showingDate.lastOfYear(),endMonth=0<endDate.compare(self.config.maxDate)?self.config.maxDate.getMonth():11,html="";endMonth>=month;month++)html+='<option value="'+month+'"',showingDate.getMonth()===month&&(html+=" selected"),html+=">"+self.config.monthNames[month],html+="</option>";return html},updateYearMenu=function(){function whatYear(spec){var year,c=spec[0];return year="-"==c||"+"==c?thisYear+parseInt(spec):"c"==c?showingDate.getYear()+parseInt(spec.substring(1)):parseInt(spec),isNaN(year)?thisYear:year}var thisYear=(new Date).getFullYear(),specs=self.config.yearRange.split(":"),year=whatYear(specs[0]),endYear=whatYear(specs[1]||""),showingYear=showingDate.getYear(),html="";for(self.config.minDate&&year<self.config.minDate.getYear()&&(year=self.config.minDate.getYear()),self.config.maxDate&&endYear>self.config.maxDate.getYear()&&(endYear=self.config.maxDate.getYear());endYear>=year;year++)html+='<option value="'+year+'"',showingYear===year&&(html+=" selected"),html+=">"+year+"</option>";return html},updateNavigationCurrentDate=function(){navigationCurrentMonth.innerHTML=self.config.changeMonth?updateMonthMenu():self.config.monthNames[showingDate.getMonth()],navigationCurrentYear.innerHTML=self.config.changeYear?updateYearMenu():showingDate.getYear()},rebuildCalendar=function(){showingDate.compare(self.config.minDate)<0?showingDate=self.config.minDate.clone():0<showingDate.compare(self.config.maxDate)&&(showingDate=self.config.maxDate.clone()),updateNavigationCurrentDate(),buildDaysInMonth()},monthChanged=function(){showingDate.setMonth(parseInt(navigationCurrentMonth.value)),rebuildCalendar()},yearChanged=function(){showingDate.setYear(parseInt(navigationCurrentYear.value)),rebuildCalendar()},documentClick=function(event){var parent;if(event.target!==self.element&&event.target!==wrapperElement&&(parent=event.target.parentNode,parent!==wrapperElement))for(;parent!==wrapperElement;)if(parent=parent.parentNode,null===parent){close();break}},calendarClick=function(event){var target=event.target,targetClass=target.className;targetClass&&("datepickr-prev-month"===targetClass||"datepickr-next-month"===targetClass?("datepickr-prev-month"===targetClass?showingDate.prevMonth():showingDate.nextMonth(),rebuildCalendar()):"datepickr-day"!==targetClass||target.parentNode.classList.contains("disabled")||(selectedDate=showingDate.clone().setDay(parseInt(target.innerHTML,10)),self.config.altInput&&(self.config.altInput.value=selectedDate.strftime(self.config.altFormat)),self.element.value=selectedDate.strftime(self.config.dateFormat),close(),buildDaysInMonth()))},buildNavigation=function(){var dates=document.createElement("div");dates.innerHTML='<span class="datepickr-prev-month">&lt;</span><span class="datepickr-next-month">&gt;</span>',dates.className="datepickr-dates",dates.appendChild(navigationCurrentMonth),dates.appendChild(navigationCurrentYear),calendarContainer.appendChild(dates)},buildCalendar=function(){buildNavigation(),buildDaysOfWeek(),rebuildCalendar(),calendar.appendChild(calendarBody),calendarContainer.appendChild(calendar),wrapperElement.appendChild(calendarContainer)},getOpenEvent=function(){return"INPUT"===self.element.nodeName?"focus":"click"},bind=function(){var stopEvent=function(ev){ev.preventDefault()};self.config.changeMonth&&(navigationCurrentMonth.addEventListener("click",stopEvent),navigationCurrentMonth.addEventListener("change",monthChanged)),self.config.changeYear&&(navigationCurrentYear.addEventListener("click",stopEvent),navigationCurrentYear.addEventListener("change",yearChanged)),self.element.addEventListener(getOpenEvent(),open),calendarContainer.addEventListener("click",calendarClick)},open=function(){document.addEventListener("click",documentClick),wrapperElement.classList.add("open")},close=function(){document.removeEventListener("click",documentClick),wrapperElement.classList.remove("open")},destroy=function(){var parent,element;document.removeEventListener("click",documentClick),self.element.removeEventListener(getOpenEvent(),open),parent=self.element.parentNode,parent.removeChild(calendarContainer),element=parent.removeChild(self.element),parent.parentNode.replaceChild(element,parent)},init=function(){var parsedDate;self.destroy=destroy,self.element=element,self.element.value&&(parsedDate=Date.parse(self.element.value)),parsedDate&&!isNaN(parsedDate)?selectedDate=showingDate=new DPDate(parsedDate):(selectedDate=null,showingDate=new DPDate),wrap(),buildCalendar(),bind()},init(),self};